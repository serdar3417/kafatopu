
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Kafa Topu Arena</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <style>
        body {
            background-color: #111;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Press Start 2P', cursive;
            -webkit-user-select: none; -ms-user-select: none; user-select: none;
        }

        #game-container {
            position: relative;
            border: 5px solid #fff;
            box-shadow: 0 0 30px #0ff;
        }

        canvas {
            display: block;
            background-color: #87CEEB; /* Gökyüzü */
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .overlay h1 {
            font-size: 50px;
            color: #FFD700;
            text-shadow: 3px 3px #ff0000;
            margin-bottom: 20px;
        }
        
        .overlay p {
            font-size: 20px;
            margin-bottom: 30px;
        }

        .overlay button {
            font-family: 'Press Start 2P', cursive;
            font-size: 24px;
            padding: 15px 30px;
            background: #4CAF50;
            color: white;
            border: 3px solid white;
            border-radius: 10px;
            cursor: pointer;
            text-transform: uppercase;
            transition: transform 0.2s;
        }

        .overlay button:hover {
            transform: scale(1.1);
            background: #45a049;
        }

        #end-screen {
            display: none;
        }
        
        /* Mobil Kontroller */
        #mobile-controls {
            display: none; 
            position: absolute;
            bottom: 20px;
            width: 100%;
            padding: 0 20px;
            box-sizing: border-box;
            z-index: 100;
            justify-content: space-between;
        }
        
        @media (hover: none) and (pointer: coarse) {
            #mobile-controls { display: flex; }
        }

        .mobile-btn {
            width: 70px; height: 70px;
            background-color: rgba(255, 255, 255, 0.3);
            border: 2px solid white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            color: white;
            font-weight: bold;
        }
        .mobile-btn:active { background-color: rgba(255, 255, 255, 0.6); }

    </style>
</head>
<body>

    <div id="game-container">
        <canvas id="gameCanvas" width="800" height="450"></canvas>
        
        <div id="start-screen" class="overlay">
            <h1>KAFA TOPU</h1>
            <p>Ok tuşlarıyla hareket et ve zıpla. <br>Boşluk tuşu ile şut çek!</p>
            <button id="start-btn">Maça Başla</button>
        </div>

        <div id="end-screen" class="overlay">
            <h1 id="result-text">MAÇ BİTTİ</h1>
            <p id="final-score-text">Skor: 0 - 0</p>
            <button id="restart-btn">Yeniden Oyna</button>
        </div>
        
        <div id="mobile-controls">
            <div id="left-btn" class="mobile-btn">‹</div>
            <div id="right-btn" class="mobile-btn">›</div>
            <div id="kick-btn" class="mobile-btn">⚽</div>
            <div id="jump-btn" class="mobile-btn">↑</div>
        </div>
    </div>

    <script>
    // --- TEMEL KURULUM ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const startScreen = document.getElementById('start-screen');
    const endScreen = document.getElementById('end-screen');
    const startBtn = document.getElementById('start-btn');
    const restartBtn = document.getElementById('restart-btn');
    const resultText = document.getElementById('result-text');
    const finalScoreText = document.getElementById('final-score-text');

    // --- SES EFEKTLERİ (Base64 formatında) ---
    const sounds = {
        kick: new Audio("data:audio/wav;base64,UklGRlgBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YXIAAACw/v/+v/7//v/+v/7//v/+v/4A/gD+AP4A/gD+AP4A/gD+AP4A/v/9//3//f/9//3//f/9//3//f/9//z/+v/6//r/+v/6//r/+v/6//r/+f/5//n/+f/5//n/+f/5//n/+f/4//j/+P/4//j/+P/4//j/+P/4//f/9/33/ff99/33/ff99/33/ff98/3z/fP98/3z/fP98/3z/fP98/3z/ev96/3r/ev96/3r/ev96/3r/ev95/3n/ef95/3n/ef95/3n/ef95/3j/eP94/3j/eP94/3j/eP94/3j/eP93/3X/df91/3X/df91/3X/df91/3L/cv9y/3L/cv9y/3L/cv9y/3L/cv9x/3H/cf9x/3H/cf9x/3H/cf9x/3D/cP9w/3D/cP9w/3D/cP9w/3D/cP9v/2//b/9v/2//b/9v/2//b/9v/2//af9p/2n/af9p/2n/af9p/2n/af9o/2j/aP9o/2j/aP9o/2j/aP9o/2b/Zv9m/2b/Zv9m/2b/Zv9m/2b/Yv9i/2L/Yv9i/2L/Yv9i/2L/Yv9h/2H/Yf9h/2H/Yf9h/2H/Yf9h/2D/YP9g/2D/YP9g/2D/YP9g/2D/X/9f/1//X/9f/1//X/9f/1//X/9e/17/Xv9e/17/Xv9e/17/Xv9e/13/Xf9d/13/Xf9d/13/Xf9d/13/XP9c/1z/XP9c/1z/XP9c/1z/XP9b/1v/W/9b/1v/W/9b/1v/W/9b/1r/Wv9a/1r/Wv9a/1r/Wv9a/1r/V/9X/1f/V/9X/1f/V/9X/1f/V/9U/1T/VP9U/1T/VP9U/1T/VP9U/1P/U/9T/1P/U/9T/1P/U/9T/1P/Uv9S/1L/Uv9S/1L/Uv9S/1L/Uv9R/1H/Uf9R/1H/Uf9R/1H/Uf9R/1D/UP9Q/1D/UP9Q/1D/UP9Q/1D/T/9P/0//T/9P/0//T/9P/0//T/9O/07/Tv9O/07/Tv9O/07/Tv9O/03/Tf9N/03/Tf9N/03/Tf9N/03/S/9L/0v/S/9L/0v/S/9L/0v/S/9K/0r/Sv9K/0r/Sv9K/0r/Sv9K/0r/SP9I/0j/SP9I/0j/SP9I/0j/SP9H/0f/R/9H/0f/R/9H/0f/R/9H/0P/Q/9D/0P/Q/9D/0P/Q/9D/0P/Qv9C/0L/Qv9C/0L/Qv9C/0L/Qv9B/0H/Qf9B/0H/Qf9B/0H/Qf9B/0D/QP9A/0D/QP9A/0D/QP9A/0D/P/8//z//P/8//z//P/8//z//Pv8+/z7/Pv8+/z7/Pv8+/z7/Pv89/z3/Pf89/z3/Pf89/z3/Pf89/zz/PP88/zz/PP88/zz/PP88/zz/O/87/zv/O/87/zv/O/87/zv/O/86/zr/Ov86/zr/Ov86/zr/Ov86/zn/Of85/zn/Of85/zn/Of85/zn/OP84/zj/OP84/zj/OP84/zj/OP83/zf/N/83/zf/N/83/zf/N/83/zL/Mv8y/zL/Mv8y/zL/Mv8y/zL/Mf8x/zH/Mf8x/zH/Mf8x/zH/Mf8w/zD/MP8w/zD/MP8w/zD/MP8w/y//L/8v/y//L/8v/y//L/8v/y//K/8r/yv/K/8r/yv/K/8r/yv/K/8p/yn/Kf8p/yn/Kf8p/yn/Kf8p/yj/KP8o/yj/KP8o/yj/KP8o/yj/J/8n/yf/J/8n/yf/J/8n/yf/J/8i/yL/Iv8i/yL/Iv8i/yL/Iv8i/yH/If8h/yH/If8h/yH/If8h/yH/IP8g/yD/IP8g/yD/IP8g/yD/IP8f/x//H/8f/x//H/8f/x//H/8f/x7/Hv8e/x7/Hv8e/x7/Hv8e/x7/G/8b/xv/G/8b/xv/G/8b/xv/G/8Z/xn/Gf8Z/xn/Gf8Z/xn/Gf8Z/xX/Ff8V/xX/Ff8V/xX/Ff8V/xX/E/8T/xP/E/8T/xP/E/8T/xP/E/8R/xH/Ef8R/xH/Ef8R/xH/Ef8R/w//D/8P/w//D/8P/w//D/8P/w//C/8L/wv/C/8L/wv/C/8L/wv/C/8I/wj/CP8I/wj/CP8I/wj/CP8I/wX/Bf8F/wX/Bf8F/wX/Bf8F/wX/Av8C/wL/Av8C/wL/Av8C/wL/Av/+/v7+/v7+/v7+/v7+/v7+/v7+/v39/f39/f39/f39/f39/f39/f39/fn5+fn5+fn5+fn5+fn5+fn5+fn5+Pn4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+PT09PT09PT09PT09PT09PT09PT09PT09PTz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v39/f39/f39/f39/f39/f39/f39/f39/Q=="),
        goal: new Audio("data:audio/wav;base64,UklGRlIAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAAABkYXRhVwAAAPX+/v79/f/6//r/+v75/vn++f35/vv9+v36/vz9+P34/ff99/32/fb99P3z/fL98f3x/vL+8f7v/u/+7/7s/uv+6v7p/un+5/7m/uX+4v7g/t/+3/7a/tn+1/7V/tT+0v7Q/s/+z/7N/s3+y/7K/sr+x/7G/sf+w/7A/sD+v/6+/r3+vP67/rr+uP63/rf+tP6z/rL+sP6v/q/+qP6k/qT+o/6f/p/+nv6c/pr+mf6X/pf+kv6R/pD+j/6P/o3+if6I/of+hP6A/oD+f/59/nz+e/56/nn+d/52/nT+cv5x/nD+bv5s/mr+af5o/mj+Zf5k/mH+Yf5g/l/+X/5b/lv+Wv5Z/ln+V/5U/lP+Uv5R/lD+T/5O/k3+S/5K/kn+SP5H/kf+Q/5B/kD+f/58/nz+e/56/nn+c/5z/nD+b/5u/mz+av5q/mn+aP5o/mT+Y/5i/mH+X/5f/lv+W/5a/ln+V/5U/lT+U/5S/lH+Uf5P/k/+Tf5N/kv+Sv5J/kj+R/5H/kP+Qv5A/n/+fP58/nv+e/56/nn+c/5z/nL+cQ=="),
        whistle: new Audio("data:audio/wav;base64,UklGRqACAABXQVZFZm10IBAAAAABAAIARKwAABCxAgAEABAAZGF0YYACAABAgD9AP0E/QD9AP0A/vj+AP74/vj++P7s/gD+uP6s/oD+qP6Y/qT+sP6I/n/+cP5k/lT+TP5A/kL+RP5I/kj+QP4w/iL+Hv4a/hT+Cv4C/gr+Df4O/hD+DP4M/gn+CP4E/gP+/P76/vX+9v7z/vD+7v7q/uj+4f7c/tb+0P7M/sf+vv66/q/+pP6Y/oj+fv5y/m/+av5i/l/+Wf5U/kD+Qf5B/kj+T/5S/lP+VP5T/lD+R/47/jj+Of49/kf+Uv5g/mT+Zf5c/lj+V/5Q/kn+Pv44/iz+Iv4a/hD+Av76/u7+5v7W/sv+w/6y/p7+df5j/lj+SP47/iT+EP74/t/+sP6L/mz+Uv45/hf+6v6v/nT+SP4h/vP+p/5v/jL+8P6I/kL+9/5w/h7+1f5U/gD+hv4f/sL+Qv7R/lT+zf5i/rL+Wv6s/kL+wv5i/tX+dP7C/lr+tP4a/tX+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7C/lT+sP4a/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/sH+cv7G/mD+pP4e/s-H/N-H/N-H/N-H/N-H/N-H/N-H/M-H/M-H/M-H/M-H/M-H/M-H/M-H/L-H/L-H/L-H/L-H/L-H/L-H/L-H/L-H/K-H/K-H/K-H/K-H/K-H/K-H/K-H/K-H/J-H/J-H/J-H/J-H/J-H/J-H/J-H/J-H/I-H/I-H/I-H/I-H/I-H/I-H/I-H/I-H/H-H/H-H/H-H/H-H/H-H/H-H/H-H/G-H/G-H/G-H/G-H/G-H/G-H/G-H/G-H/F-H/F-H/F-H/F-H/F-H/F-H/F-H/F-H/E-H/E-H/E-H/E-H/E-H/E-H/E-H/E-H/D-H/D-H/D-H/D-H/D-H/D-H/D-H/D-H/C-H/C-H/C-H/C-H/C-H/C-H/C-H/C-H/B-H/B-H/B-H/B-H/B-H/B-H/B-H/B-H/A-H/A-H/A-H/A-H/A-H/A-H/A-H/A-H/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/ah/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/AH/eP/4/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/yf/J/8n/-H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8-H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8f/x//H/8="),
    };

    // --- OYUN AYARLARI ---
    const settings = {
        GRAVITY: 0.6,
        PLAYER_SPEED: 4,
        JUMP_FORCE: -13,
        KICK_FORCE: 15,
        BALL_FRICTION: 0.98,
        PLAYER_FRICTION: 0.9,
        MATCH_DURATION: 90,
    };

    let gameState = 'START';
    let timer = settings.MATCH_DURATION;
    let timerInterval = null;

    // --- OYUN NESNELERİ ---
    const groundY = canvas.height - 40;

    const player = {
        x: canvas.width * 0.25,
        y: groundY,
        w: 40, h: 60, headRadius: 30,
        dx: 0, dy: 0,
        onGround: true,
        score: 0,
        color: '#ff4136',
    };

    const ai = {
        x: canvas.width * 0.75,
        y: groundY,
        w: 40, h: 60, headRadius: 30,
        dx: 0, dy: 0,
        onGround: true,
        score: 0,
        color: '#0074d9',
    };

    const ball = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        r: 15,
        dx: 0, dy: 0,
    };

    const goal1 = { x: 0, y: groundY - 120, w: 40, h: 120 };
    const goal2 = { x: canvas.width - 40, y: groundY - 120, w: 40, h: 120 };

    // --- KONTROL MEKANİZMASI ---
    const keys = {
        ArrowLeft: false,
        ArrowRight: false,
        ArrowUp: false,
        Space: false,
    };

    window.addEventListener('keydown', (e) => {
        if (keys.hasOwnProperty(e.code)) {
            e.preventDefault();
            keys[e.code] = true;
        }
    });
    window.addEventListener('keyup', (e) => {
        if (keys.hasOwnProperty(e.code)) {
            e.preventDefault();
            keys[e.code] = false;
        }
    });
    
    // Mobil kontrol butonları
    document.getElementById('left-btn').addEventListener('touchstart', (e) => { e.preventDefault(); keys.ArrowLeft = true; });
    document.getElementById('left-btn').addEventListener('touchend', (e) => { e.preventDefault(); keys.ArrowLeft = false; });
    document.getElementById('right-btn').addEventListener('touchstart', (e) => { e.preventDefault(); keys.ArrowRight = true; });
    document.getElementById('right-btn').addEventListener('touchend', (e) => { e.preventDefault(); keys.ArrowRight = false; });
    document.getElementById('jump-btn').addEventListener('touchstart', (e) => { e.preventDefault(); keys.ArrowUp = true; });
    document.getElementById('jump-btn').addEventListener('touchend', (e) => { e.preventDefault(); keys.ArrowUp = false; });
    document.getElementById('kick-btn').addEventListener('touchstart', (e) => { e.preventDefault(); keys.Space = true; });
    document.getElementById('kick-btn').addEventListener('touchend', (e) => { e.preventDefault(); keys.Space = false; });


    // --- ÇİZİM FONKSİYONLARI ---

    function drawField() {
        // Zemin
        ctx.fillStyle = '#2ECC40';
        ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);
        ctx.strokeStyle = '#FFFFFF';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(0, groundY);
        ctx.lineTo(canvas.width, groundY);
        ctx.stroke();

        // Kaleler
        ctx.strokeStyle = '#DDDDDD';
        ctx.lineWidth = 4;
        ctx.strokeRect(goal1.x, goal1.y, goal1.w, goal1.h); // Sol kale
        ctx.strokeRect(goal2.x, goal2.y, goal2.w, goal2.h); // Sağ kale
    }

    function drawPlayer(p) {
        // Ayak/Vücut
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x - p.w / 2, p.y - p.h, p.w, p.h);

        // Kafa
        ctx.beginPath();
        ctx.arc(p.x, p.y - p.h, p.headRadius, 0, Math.PI * 2);
        ctx.fillStyle = '#F3D1B9'; // Ten rengi
        ctx.fill();
        ctx.strokeStyle = '#000';
        ctx.stroke();

        // Göz
        ctx.beginPath();
        const eyeX = p.x + (ball.x > p.x ? 10 : -10);
        const eyeY = p.y - p.h - 5;
        ctx.arc(eyeX, eyeY, 5, 0, Math.PI * 2);
        ctx.fillStyle = 'white';
        ctx.fill();
        ctx.beginPath();
        ctx.arc(eyeX + (ball.x - eyeX)/10, eyeY + (ball.y - eyeY)/10, 2, 0, Math.PI * 2);
        ctx.fillStyle = 'black';
        ctx.fill();
    }

    function drawBall() {
        ctx.beginPath();
        ctx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
        ctx.fillStyle = '#FFFFFF';
        ctx.fill();
        ctx.strokeStyle = '#000000';
        ctx.lineWidth = 1;
        ctx.stroke();
    }

    function drawUI() {
        ctx.fillStyle = 'white';
        ctx.font = "32px 'Press Start 2P'";
        ctx.textAlign = 'center';
        
        // Skor
        ctx.fillText(`${player.score} - ${ai.score}`, canvas.width / 2, 50);

        // Zaman
        const minutes = Math.floor(timer / 60);
        const seconds = timer % 60;
        ctx.fillText(`${minutes}:${seconds < 10 ? '0' : ''}${seconds}`, canvas.width / 2, 90);
    }
    
    // --- GÜNCELLEME ve FİZİK FONKSİYONLARI ---

    function updatePhysics(p) {
        // Yer çekimi
        if (!p.onGround) {
            p.dy += settings.GRAVITY;
        }
        p.y += p.dy;
        p.x += p.dx;

        // Sürtünme
        p.dx *= settings.PLAYER_FRICTION;

        // Zemin kontrolü
        if (p.y >= groundY) {
            p.y = groundY;
            p.dy = 0;
            p.onGround = true;
        }

        // Saha sınırları
        if (p.x - p.headRadius < 0) p.x = p.headRadius;
        if (p.x + p.headRadius > canvas.width) p.x = canvas.width - p.headRadius;
    }

    function handlePlayerInput() {
        if (keys.ArrowLeft) player.dx = -settings.PLAYER_SPEED;
        if (keys.ArrowRight) player.dx = settings.PLAYER_SPEED;
        if (keys.ArrowUp && player.onGround) {
            player.dy = settings.JUMP_FORCE;
            player.onGround = false;
        }
    }
    
    function updateAI() {
        const distToBallX = ball.x - ai.x;
        const distToBallY = ball.y - ai.y;

        // Hücum / Savunma Modu
        if (ball.x > canvas.width / 2) { // Top kendi sahasındaysa hücum et
            if (distToBallX > 10) {
                ai.dx = settings.PLAYER_SPEED * 0.8;
            } else if (distToBallX < -10) {
                ai.dx = -settings.PLAYER_SPEED * 0.8;
            }
        } else { // Top rakip sahadaysa kalesine yakın dur
            const defensivePos = canvas.width * 0.75;
            if (ai.x < defensivePos) {
                 ai.dx = settings.PLAYER_SPEED * 0.7;
            } else if (ai.x > defensivePos + 10) {
                 ai.dx = -settings.PLAYER_SPEED * 0.7;
            }
        }

        // Zıplama kararı
        if (ai.onGround && distToBallY < -50 && Math.abs(distToBallX) < 100) {
            ai.dy = settings.JUMP_FORCE;
            ai.onGround = false;
        }
    }

    function updateBall() {
        ball.dy += settings.GRAVITY * 0.7; // Top daha hafif olsun
        ball.x += ball.dx;
        ball.y += ball.dy;

        ball.dx *= settings.BALL_FRICTION;
        ball.dy *= settings.BALL_FRICTION;

        // Duvarlardan sekme
        if (ball.x + ball.r > canvas.width || ball.x - ball.r < 0) {
            ball.dx *= -0.8;
            if (ball.x + ball.r > canvas.width) ball.x = canvas.width - ball.r;
            if (ball.x - ball.r < 0) ball.x = ball.r;
        }
        if (ball.y - ball.r < 0) { // Tavandan sekme
            ball.dy *= -0.8;
            ball.y = ball.r;
        }

        // Yerden sekme
        if (ball.y + ball.r > groundY) {
            ball.y = groundY - ball.r;
            ball.dy *= -0.7;
        }
    }

    function checkCollision(p, b) {
        // Kafa ile çarpışma
        let distHead = Math.sqrt((p.x - b.x)**2 + ((p.y - p.h) - b.y)**2);
        if (distHead < p.headRadius + b.r) {
            handleCollision(p, b, true);
        }

        // Vücut ile çarpışma
        let closestX = Math.max(p.x - p.w/2, Math.min(b.x, p.x + p.w/2));
        let closestY = Math.max(p.y - p.h, Math.min(b.y, p.y));
        let distBody = Math.sqrt((closestX - b.x)**2 + (closestY - b.y)**2);
        if(distBody < b.r){
            handleCollision(p, b, false);
        }
    }
    
    function handleCollision(p, b, isHead) {
        const angle = Math.atan2(b.y - (p.y - p.h), b.x - p.x);
        let force = isHead ? settings.KICK_FORCE * 1.2 : settings.KICK_FORCE * 0.8;
        
        // Eğer oyuncu şut tuşuna basıyorsa ekstra güç
        if ((p === player && keys.Space) || (p === ai && Math.abs(b.x - ai.x) < 80)) {
            force *= 1.5;
            if (p === player) sounds.kick.play();
        }

        b.dx = Math.cos(angle) * force + p.dx * 0.5;
        b.dy = Math.sin(angle) * force + p.dy * 0.5;
    }

    function checkGoal() {
        if (ball.y > goal1.y) {
            if (ball.x - ball.r < goal1.w) {
                goalScored(ai);
            } else if (ball.x + ball.r > goal2.x) {
                goalScored(player);
            }
        }
    }
    
    function goalScored(scorer) {
        scorer.score++;
        sounds.goal.play();
        resetPositions();
    }

    function resetPositions() {
        player.x = canvas.width * 0.25;
        player.y = groundY;
        player.dx = player.dy = 0;
        player.onGround = true;

        ai.x = canvas.width * 0.75;
        ai.y = groundY;
        ai.dx = ai.dy = 0;
        ai.onGround = true;

        ball.x = canvas.width / 2;
        ball.y = canvas.height / 3;
        ball.dx = (Math.random() - 0.5) * 5;
        ball.dy = 0;
    }

    // --- OYUN AKIŞI ---

    function startGame() {
        startScreen.style.display = 'none';
        endScreen.style.display = 'none';
        gameState = 'PLAYING';
        player.score = 0;
        ai.score = 0;
        timer = settings.MATCH_DURATION;
        resetPositions();

        timerInterval = setInterval(() => {
            if(gameState === 'PLAYING') {
                timer--;
                if (timer <= 0) {
                    endGame();
                }
            }
        }, 1000);
    }
    
    function endGame() {
        clearInterval(timerInterval);
        gameState = 'GAME_OVER';
        sounds.whistle.play();

        if (player.score > ai.score) {
            resultText.textContent = 'KAZANDIN!';
            resultText.style.color = '#7FDBFF';
        } else if (ai.score > player.score) {
            resultText.textContent = 'KAYBETTİN!';
            resultText.style.color = '#FF4136';
        } else {
            resultText.textContent = 'BERABERE!';
            resultText.style.color = '#AAAAAA';
        }
        finalScoreText.textContent = `Skor: ${player.score} - ${ai.score}`;
        endScreen.style.display = 'flex';
    }


    startBtn.addEventListener('click', startGame);
    restartBtn.addEventListener('click', startGame);

    function gameLoop() {
        // Arka planı temizle
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Sahayı çiz
        drawField();
        
        if (gameState === 'PLAYING') {
            // Güncellemeler
            handlePlayerInput();
            updateAI();
            updatePhysics(player);
            updatePhysics(ai);
            updateBall();

            // Çarpışmalar
            checkCollision(player, ball);
            checkCollision(ai, ball);
            checkGoal();
        }

        // Çizimler
        drawPlayer(player);
        drawPlayer(ai);
        drawBall();
        drawUI();
        
        requestAnimationFrame(gameLoop);
    }

    // Oyunu başlat
    gameLoop();

    </script>
</body>
</html>